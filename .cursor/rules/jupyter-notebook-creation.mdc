---
description: 
globs: 
alwaysApply: true
---
# AI Agent Training Jupyter Notebook Creation Rules

## Project Context
This is an AI Agent training project focused on core skills development. The main training content is outlined in [README.md](mdc:README.md) with specific focus on Chapter 2: Core Skills Mastery (45 minutes).

## Existing Structure
- Main project documentation: [README.md](mdc:README.md)
- Preparation schedule: [prep_schedule_ch2_3days.md](mdc:prep_schedule_ch2_3days.md)
- Content outline: [core_skills_outline.md](mdc:core_skills_outline.md)
- Example notebook: [tool_use/01_å·¥å…·ä½¿ç”¨.ipynb](mdc:tool_use/01_å·¥å…·ä½¿ç”¨.ipynb)

## Jupyter Notebook Creation Guidelines

### 1. Notebook Structure Template
When creating new Jupyter notebooks for this project, follow this structure:

```json
{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "# [Topic Name] åŸºç¡€æ•™ç¨‹\n\n## å­¦ä¹ ç›®æ ‡\n* ç†è§£ [concept 1]\n* æŒæ¡ [skill 1]\n* èƒ½å¤Ÿ [application 1]"
      ]
    }
  ]
}
```

### 2. Content Organization (45-minute structure)
- **å‰è¨€** (2-3 minutes): Learning objectives and overview
- **æ ¸å¿ƒæ¦‚å¿µ** (concept explanation with examples)
- **å®è·µç¤ºä¾‹** (hands-on code examples)
- **æ¼”ç¤ºä»£ç ** (working demonstrations)
- **æ€»ç»“** (key takeaways)

### 3. Code Cell Standards
- Always include proper imports at the beginning
- Use descriptive variable names in Chinese context
- Include error handling for API calls
- Add comments in Chinese for clarity
- Test examples should be runnable
- **MUST use streaming output for all Claude API calls**

### 4. Required Dependencies
Common dependencies for AI Agent notebooks:
```python
%pip install anthropic openai python-dotenv requests --quiet
import anthropic
import openai
import os
from dotenv import load_dotenv
```

### 5. API Configuration Pattern - STREAMING REQUIRED
```python
load_dotenv()
client = anthropic.Anthropic(
    api_key=os.getenv("ANTHROPIC_API_KEY"),
    http_client=httpx.Client(proxy="http://127.0.0.1:7890/")
)

# å®šä¹‰è¾…åŠ©å‡½æ•°ç”¨äºè°ƒç”¨Claude APIï¼ˆæµå¼è¾“å‡ºï¼‰
def call_claude(prompt, system="", max_tokens=1000, temperature=0.7):
    """
    è°ƒç”¨Claude APIçš„è¾…åŠ©å‡½æ•°ï¼ˆæµå¼è¾“å‡ºï¼‰
    
    å‚æ•°:
    - prompt: ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯
    - system: ç³»ç»Ÿæç¤ºè¯
    - max_tokens: æœ€å¤§tokenæ•°
    - temperature: éšæœºæ€§å‚æ•°ï¼ˆ0-1ï¼Œè¶Šé«˜è¶Šéšæœºï¼‰
    """
    full_response = ""
    
    with client.messages.stream(
        model="claude-4-sonnet-20250514",
        max_tokens=max_tokens,
        temperature=temperature,
        system=system,
        messages=[
            {
                "role": "user",
                "content": prompt
            }
        ]
    ) as stream:
        for text in stream.text_stream:
            print(text, end="", flush=True)
            full_response += text
    
    print()  # æ·»åŠ æ¢è¡Œ
    return full_response
```

### 6. Five Core Modules Structure
Based on [core_skills_outline.md](mdc:core_skills_outline.md), notebooks should cover:

1. **Prompt å·¥ç¨‹** (18 min)
   - TACOS framework (Task, Audience, Context, Output, Style)
   - Three-stage iteration examples
   - Working code demonstrations

2. **Tools å·¥å…·é›†æˆ** (12 min)
   - Tool calling workflow
   - REST API integration examples
   - Error handling and retry strategies

3. **æ¨¡å‹å¾®è°ƒ** (8 min)
   - SFT vs RFT comparison
   - Minimal code examples
   - Evaluation best practices

4. **MCP æœåŠ¡** (5 min)
   - MCP definition and value
   - Capability extension examples

5. **AI Agent åŸºç¡€æ¶æ„** (2 min)
   - Five core components
   - Mermaid architecture diagrams

### 7. Teaching Examples - èµ„è®¯æ‘˜è¦ä¸äº¤æ˜“è¶‹åŠ¿ä¸“é¡¹è¦æ±‚
**ä¸¥æ ¼éµå¾ª** [teaching-examples-focus.mdc](mdc:teaching-examples-focus.mdc) ä¸­çš„è§„å®šï¼š

#### ğŸ¯ æ ¸å¿ƒèšç„¦åœºæ™¯ï¼ˆ100%å¿…é¡»ï¼‰
æ‰€æœ‰æ•™å­¦ä»£ç ç¤ºä¾‹å¿…é¡»**ä¸¥æ ¼é™å®š**åœ¨ä»¥ä¸‹ä¸¤ä¸ªåœºæ™¯ï¼š
1. **èµ„è®¯æ‘˜è¦** (Financial News Analysis & Summarization)
2. **äº¤æ˜“è¶‹åŠ¿** (Trading Trends Analysis)

**âš ï¸ ä¾‹å¤–è¯´æ˜ï¼šæ¨¡å‹å¾®è°ƒç« èŠ‚å¯ä»¥ä½¿ç”¨é€šç”¨æŠ€æœ¯ç¤ºä¾‹ï¼Œä¸å—æ­¤é™åˆ¶çº¦æŸã€‚**

#### ğŸ“Š èµ„è®¯æ‘˜è¦å¿…å¤‡å…ƒç´ 
- è´¢ç»æ–°é—»æ™ºèƒ½æ‘˜è¦ä¸åˆ†æ
- ç ”æŠ¥è¦ç‚¹è‡ªåŠ¨æå–
- å¤®è¡Œæ”¿ç­–æ–‡ä»¶è§£è¯»
- å¸‚åœºèˆ†æƒ…ç›‘æ§ä¸é¢„è­¦

#### ğŸ“ˆ äº¤æ˜“è¶‹åŠ¿å¿…å¤‡å…ƒç´ 
- è‚¡ç¥¨/å¤–æ±‡/æœŸè´§ä»·æ ¼èµ°åŠ¿åˆ†æ
- æŠ€æœ¯æŒ‡æ ‡æ™ºèƒ½è®¡ç®—(RSIã€MACDã€KDJ)
- äº¤æ˜“ä¿¡å·ç”Ÿæˆä¸é£é™©è¯„ä¼°
- æŠ•èµ„ç»„åˆä¼˜åŒ–å»ºè®®

#### âš ï¸ ä¸¥æ ¼ç¦æ­¢çš„ç¤ºä¾‹ç±»å‹
- éé‡‘èè¡Œä¸šæ¡ˆä¾‹(ç”µå•†ã€æ•™è‚²ã€åŒ»ç–—ç­‰)
- é€šç”¨AIå¯¹è¯ç¤ºä¾‹(å¤©æ°”ã€å¸¸è¯†é—®ç­”)
- æŠ½è±¡æŠ€æœ¯æ¼”ç¤º(æ— å®é™…ä¸šåŠ¡ä»·å€¼)

#### âœ… åˆè§„è¦æ±‚
- æ‰€æœ‰æŠ•èµ„åˆ†æå¿…é¡»åŒ…å«"ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®"å…è´£å£°æ˜
- å¼ºè°ƒAIä»…ä½œä¸º"æ„å›¾è¯†åˆ«"å’Œ"å‚æ•°æ”¶é›†"å·¥å…·
- æ˜ç¡®æ‰€æœ‰æ ¸å¿ƒä¸šåŠ¡æ“ä½œéœ€åç«¯ç³»ç»Ÿä¸¥æ ¼æ ¡éªŒ
- ä½“ç°æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤è¦æ±‚

### 8. Markdown Cell Formatting
- Use Chinese headers with English technical terms in parentheses
- Include time estimates for each section
- Use bullet points for learning objectives
- Include diagrams using Mermaid when appropriate

### 9. Interactive Elements
- Use progress indicators (â­ for important sections)
- Focus on clear explanations and working examples
- Provide step-by-step demonstrations
- **All Claude API calls must use streaming output for better user experience**

### 10. File Naming Convention
- Use descriptive Chinese names: `02_æ ¸å¿ƒæŠ€èƒ½æŒæ¡.ipynb`
- Include chapter/section numbers
- Store in appropriate subdirectories

### 11. Quality Checklist
Before finalizing any notebook:
- [ ] All code cells run without errors
- [ ] API keys are loaded from environment variables
- [ ] Chinese explanations are clear and accurate
- [ ] **ç¤ºä¾‹100%èšç„¦äºèµ„è®¯æ‘˜è¦æˆ–äº¤æ˜“è¶‹åŠ¿åœºæ™¯**
- [ ] **ä½¿ç”¨çœŸå®é‡‘èæ•°æ®æ ¼å¼å’Œç»“æ„**
- [ ] Time estimates match content volume
- [ ] Working demonstrations are included
- [ ] Error handling is implemented
- [ ] **All Claude API calls use streaming output**
- [ ] **ä¸¥æ ¼ç¦æ­¢éé‡‘èè¡Œä¸šæ¡ˆä¾‹å’Œé€šç”¨AIç¤ºä¾‹**
- [ ] **Compliance disclaimers are included where appropriate**
- [ ] **æ¯ä¸ªç¤ºä¾‹éƒ½ä»é“¶è¡Œä¸šåŠ¡å®é™…éœ€æ±‚å‡ºå‘**

## Integration with Existing Content
When creating notebooks, reference and build upon:
- Training schedule from [prep_schedule_ch2_3days.md](mdc:prep_schedule_ch2_3days.md)
- Content structure from [core_skills_outline.md](mdc:core_skills_outline.md)
- Code patterns from [tool_use/01_å·¥å…·ä½¿ç”¨.ipynb](mdc:tool_use/01_å·¥å…·ä½¿ç”¨.ipynb)
- **æ•™å­¦ç¤ºä¾‹ä¸“é¡¹è¦æ±‚ from [teaching-examples-focus.mdc](mdc:teaching-examples-focus.mdc)**
- Banking best practices from [bank-ai-best-practices.mdc](mdc:bank-ai-best-practices.mdc)

## Best Practices
- Keep each section focused and time-bounded
- Provide both theoretical explanation and practical examples
- **æ‰€æœ‰ç¤ºä¾‹å¿…é¡»ä¸¥æ ¼é™å®šäºèµ„è®¯æ‘˜è¦å’Œäº¤æ˜“è¶‹åŠ¿ä¸¤å¤§åœºæ™¯**
- **ä½¿ç”¨çœŸå®çš„é‡‘èæ•°æ®æ ¼å¼ï¼Œé¿å…æŠ½è±¡æˆ–è™šæ„æ•°æ®**
- Ensure all external dependencies are clearly documented
- Test all code examples before finalizing
- Include proper error handling for network requests and API calls
- **Always use streaming output for better teaching demonstration**
- **æ¯ä¸ªä»£ç ç¤ºä¾‹éƒ½è¦ä½“ç°é“¶è¡Œå®é™…ä¸šåŠ¡ä»·å€¼**
- **Maintain banking compliance awareness in all content**
- **å‚è€ƒ [teaching-examples-focus.mdc](mdc:teaching-examples-focus.mdc) ç¡®ä¿ç¤ºä¾‹è´¨é‡**

